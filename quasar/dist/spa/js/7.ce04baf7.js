(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{d5c2:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("page-toolbar",{attrs:{buttons:e.toolbarButtons},on:{save:e.saveFn}}),a("breadcrumbs",{attrs:{breadcrumbs:e.breadcrumbs}}),a("div",{class:e.$q.screen.gt.sm?"q-px-lg q-mt-md":"q-px-xs q-mt-sm"},[a("q-card",[a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-input",{ref:"name",attrs:{label:"Name",outlined:"",dense:"",square:"",rules:[function(e){return!!e||"Required"}]},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1)]),a("div",{staticClass:"row q-mt-xs"},[a("div",{staticClass:"col"},[a("q-table",{attrs:{columns:e.columns,title:"Items",data:e.model.items,"row-key":"sl_no"},scopedSlots:e._u([{key:"body-cell-action",fn:function(t){return[a("q-td",{staticClass:"text-right"},[a("q-btn",{attrs:{color:"grey-9",round:"",flat:"",icon:"delete"},on:{click:function(a){return e.deleteItem(t.rowIndex)}}})],1)]}},{key:"body-cell-qty",fn:function(t){return[a("q-td",{staticClass:"text-right"},[e._v("\n                  "+e._s(t.value)+"\n                  "),a("q-popup-edit",{attrs:{buttons:""},model:{value:t.row.qty,callback:function(a){e.$set(t.row,"qty",a)},expression:"props.row.qty"}},[a("q-input",{attrs:{dense:"",autofocus:"",type:"number"},model:{value:t.row.qty,callback:function(a){e.$set(t.row,"qty",e._n(a))},expression:"props.row.qty"}})],1)],1)]}}])})],1)]),a("div",{staticClass:"row q-col-gutter-xs q-mt-xs"},[a("div",{},[a("q-btn",{attrs:{icon:"list",label:"Select Items",flat:"",color:"teal",tabindex:"11"},on:{click:function(t){e.itemsDialog=!0}}})],1)])])],1)],1),a("q-dialog",{attrs:{maximized:"",persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.itemsDialog,callback:function(t){e.itemsDialog=t},expression:"itemsDialog"}},[a("q-card",{staticClass:"bg-primary text-white"},[a("q-bar",[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),a("q-card-section",[a("q-table",{attrs:{title:"Items",data:e.sale_order.items,columns:[{name:"name",required:!0,label:"Item",align:"left",field:function(e){return e.product.name},sortable:!0}],selection:"multiple",selected:e.model.items,filter:e.search},on:{"update:selected":function(t){return e.$set(e.model,"items",t)}},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search",clearable:""},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0}])})],1)],1)],1)],1)},o=[],l=(a("a434"),a("a89c")),i=a("b6c6"),r={name:"BoxCreate",components:{PageToolbar:l["a"],Breadcrumbs:i["a"]},data(){return{columns:[{name:"product",field:e=>e.product.name,label:"Item",align:"left"},{name:"qty",field:"qty",label:"Qty",align:"right"},{name:"action",field:"action",label:"",sortable:!1,align:"right"}],sale_order:{serial_no:null},model:{name:null,items:[]},itemsDialog:!1,search:null}},mounted(){this.$store.commit("setPageTitle","Packaging"),this.$axios.get("sale_orders/"+this.$route.params.so_id).then((e=>{this.sale_order=e.data})),this.$route.params.id&&this.$axios.get("packaging/"+this.$route.params.so_id+"/"+this.$route.params.id).then((e=>{this.model=e.data}))},computed:{toolbarButtons(){const e=[];return e.push({label:"Save",id:"save",type:"button",color:"teal",icon:"save"}),e},breadcrumbs(){return[{label:"Dashboard",link:"/"},{label:"Sale Orders",link:"/sale_orders"},{label:this.sale_order.serial_no,link:"/sale_orders/view/"+this.$route.params.so_id},{label:"Packaging",link:"/packaging/"+this.$route.params.so_id},{label:"Create"}]}},methods:{saveFn(){if(this.$refs.name.validate()&this.validateCount()){let e="packaging/"+this.$route.params.so_id;this.$route.params.id&&(this.model._method="PUT",e+="/"+this.$route.params.id),this.$axios.post(e,this.model).then((e=>{"success"===e.data.message&&(this.$q.notify({message:"Saved Successfully",type:"positive"}),this.$router.back())})).catch((e=>{if(422===e.response.status){let t="";Object.keys(e.response.data.errors).forEach((a=>{t+=e.response.data.errors[a][0]+"</br>"})),this.$q.dialog({html:!0,message:t})}}))}},validateCount(){return this.model.items.length>0||(this.$q.notify({message:"There Should be atleast one item!!",type:"negative"}),!1)},deleteItem(e){this.$q.dialog({title:"Confirm",message:"Do you want to delete this item?",cancel:!0}).onOk((()=>{this.model.items.splice(e,1)}))}}},n=r,c=a("2877"),d=a("9989"),u=a("f09f"),m=a("a370"),p=a("27f9"),b=a("eaac"),h=a("db86"),g=a("9c40"),f=a("42a1"),q=a("24e8"),v=a("d847"),y=a("2c91"),k=a("05c0"),x=a("0016"),$=a("7f67"),_=a("eebe"),w=a.n(_),C=Object(c["a"])(n,s,o,!1,null,null,null);t["default"]=C.exports;w()(C,"components",{QPage:d["a"],QCard:u["a"],QCardSection:m["a"],QInput:p["a"],QTable:b["a"],QTd:h["a"],QBtn:g["a"],QPopupEdit:f["a"],QDialog:q["a"],QBar:v["a"],QSpace:y["a"],QTooltip:k["a"],QIcon:x["a"]}),w()(C,"directives",{ClosePopup:$["a"]})}}]);