(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[97],{"0e76":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("page-toolbar",{attrs:{"page-title":t.name+" Details",buttons:t.toolbarButtons},on:{sendtoaccounts:function(e){return t.sendToAccounts()},activate:function(e){return t.activate()},revert:function(e){return t.revert()}}}),s("breadcrumbs",{attrs:{breadcrumbs:t.breadcrumbs}}),s("div",{class:t.$q.screen.gt.sm?"q-px-lg q-mt-md":"q-px-xs q-mt-sm"},[s("q-card",[s("q-card-section",[s("div",{staticClass:"row q-col-gutter-md"},[s("div",{staticClass:"col-xs-12 col-md-6"},[s("q-markup-table",{attrs:{separator:"cell"}},[s("tbody",[s("tr",[s("td",[t._v("Status")]),s("td",[t._v(t._s(t.status))])]),s("tr",[s("td",[t._v("Name")]),s("td",[t._v(t._s(t.name))])]),s("tr",[s("td",[t._v("GST No")]),s("td",[t._v(t._s(t.gst_number))])]),t._l(t.emails,(function(e,a){return s("tr",{key:a+"email"},[s("td",[0==a?s("div",[t._v("Emails")]):t._e()]),s("td",[t._v(t._s(e.content))])])})),t.billing_address?s("tr",[s("td",[t._v("Address")]),s("td",[t._v(t._s(t.addressFormat(t.billing_address)))])]):t._e(),s("tr",[s("td",[t._v("Created At")]),s("td",[t._v(t._s(t.created_at))])])],2)])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col q-pl-sm q-mt-md"},[s("div",{staticClass:"text-subtitle1"},[t._v("Remarks")]),s("div",{staticClass:"text",domProps:{innerHTML:t._s(t.remarks)}})])])])],1)],1),s("page-toolbar",{staticClass:"q-mt-md",attrs:{"page-title":""},on:{sendtoaccounts:function(e){return t.sendToAccounts()},activate:function(e){return t.activate()},revert:function(e){return t.revert()}}})],1)},r=[],i=(s("e6cf"),s("a79d"),s("a89c")),o=s("b6c6"),n={name:"SuppliersView",components:{PageToolbar:i["a"],Breadcrumbs:o["a"]},data(){return{name:null,status:null,gst_number:null,emails:[],billing_address:null,remarks:null,created_at:null}},computed:{toolbarButtons(){const t=[];return this.$store.getters.hasPermissionTo("approve_supplier")&&"Pending Activation"===this.status&&t.push({label:"Activate",id:"activate",type:"button",color:"green-10",icon:"check"}),this.$store.getters.hasPermissionTo("approve_supplier")&&"Active"===this.status&&t.push({label:"Revert",id:"revert",type:"button",color:"grey-10",icon:"undo"}),this.$store.getters.hasPermissionTo("create_supplier")&&"Draft"===this.status&&t.push({label:"Send to Accounts",id:"sendtoaccounts",type:"button",color:"blue-10",icon:"forward"}),this.$store.getters.hasPermissionTo("update_supplier")&&"Draft"===this.status&&t.push({label:"Edit",id:"edit",type:"a",link:"/suppliers/edit/"+this.$route.params.id,color:"teal",icon:"edit"}),t},breadcrumbs(){const t=[{label:"Dashboard",link:"/"},{label:"Suppliers",link:"/suppliers"},{label:this.name,link:""}];return t}},mounted(){this.$store.getters.hasPermissionTo("viewAny_supplier")?this.getDataFromApi():this.$router.push({name:"Error403"})},methods:{getDataFromApi(){this.$q.loading.show(),this.$axios.get("suppliers/"+this.$route.params.id).then((t=>{this.name=t.data.name,this.status=t.data.status,this.gst_number=t.data.gst_number,this.billing_address=t.data.addresses[0],this.emails=t.data.emails,this.created_at=this.getLocaleString(t.data.created_at),this.remarks=t.data.remarks})).finally((()=>{this.$store.commit("setPageTitle","Supplier: "+this.name),this.$q.loading.hide()}))},addressFormat(t){let e="";return e+=t.line_1+", ",t.line_2&&(e+=t.line_2+", "),t.pin&&(e+=t.pin+", "),t.district&&(e+=t.district+", "),e+=t.state+", ",e+=t.country+", ",t.phones.forEach((t=>{e+="("+t.country_code+")"+t.content+", "})),e=e.substr(0,e.length-2),e},sendToAccounts(){this.$axios.get("suppliers/request_activation/"+this.$route.params.id).then((t=>{"success"===t.data.message&&(this.$router.back(),this.$q.notify({color:"orange-10",message:"Supplier is sent for activation"}))}))},activate(){this.$axios.get("suppliers/activate/"+this.$route.params.id).then((t=>{"success"===t.data.message&&(this.$router.back(),this.$q.notify({type:"positive",message:"Supplier is activated"}))}))},revert(){this.$axios.get("suppliers/revert/"+this.$route.params.id).then((t=>{"success"===t.data.message&&(this.$router.back(),this.$q.notify({color:"grey-10",message:"Supplier is reverted successfully"}))}))}}},l=n,u=s("2877"),c=s("9989"),d=s("f09f"),p=s("a370"),m=s("2bb1"),h=s("eebe"),b=s.n(h),v=Object(u["a"])(l,a,r,!1,null,null,null);e["default"]=v.exports;b()(v,"components",{QPage:c["a"],QCard:d["a"],QCardSection:p["a"],QMarkupTable:m["a"]})}}]);