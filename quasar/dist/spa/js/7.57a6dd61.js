(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{d5c2:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("page-toolbar",{attrs:{buttons:e.toolbarButtons},on:{save:e.saveFn}}),a("breadcrumbs",{attrs:{breadcrumbs:e.breadcrumbs}}),a("div",{class:e.$q.screen.gt.sm?"q-px-lg q-mt-md":"q-px-xs q-mt-sm"},[a("q-card",[a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-input",{ref:"name",attrs:{label:"Name",outlined:"",dense:"",square:"",rules:[function(e){return!!e||"Required"}]},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1)]),a("div",{staticClass:"row q-mt-xs"},[a("div",{staticClass:"col"},[a("q-table",{attrs:{columns:e.columns,title:"Items",data:e.model.items,"row-key":"sl_no"},scopedSlots:e._u([{key:"body-cell-action",fn:function(t){return[a("q-td",{staticClass:"text-right"},[a("q-btn",{attrs:{color:"grey-9",round:"",flat:"",icon:"delete"},on:{click:function(a){return e.deleteItem(t.rowIndex)}}})],1)]}}])})],1)]),a("div",{staticClass:"row q-col-gutter-xs q-mt-xs"},[a("div",{},[a("q-btn",{attrs:{icon:"list",label:"Select Items",flat:"",color:"teal",tabindex:"11"},on:{click:function(t){e.itemsDialog=!0}}})],1)])])],1)],1),a("q-dialog",{attrs:{maximized:"",persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.itemsDialog,callback:function(t){e.itemsDialog=t},expression:"itemsDialog"}},[a("q-card",{staticClass:"bg-primary text-white"},[a("q-bar",[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),a("q-card-section",[a("q-table",{attrs:{title:"Items",data:e.productRepository,columns:[{name:"name",required:!0,label:"Item",align:"left",field:function(e){return e.name},sortable:!0}],selection:"multiple",selected:e.model.items,filter:e.search},on:{"update:selected":function(t){return e.$set(e.model,"items",t)}},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search",clearable:""},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0}])})],1)],1)],1)],1)},o=[],i=(a("a434"),a("a89c")),l=a("b6c6"),r={name:"BoxCreate",components:{PageToolbar:i["a"],Breadcrumbs:l["a"]},data(){return{columns:[{name:"product",field:e=>e.name,label:"Item",align:"left"},{name:"action",field:"action",label:"",sortable:!1,align:"right"}],sale_order:{serial_no:null},productRepository:[],model:{name:null,items:[]},itemsDialog:!1,search:null}},mounted(){this.$store.commit("setPageTitle","Packaging"),this.$axios.get("sale_orders/"+this.$route.params.so_id).then((e=>{this.sale_order=e.data,this.productRepository=this.$_.map(e.data.items,(e=>e.product))})),this.$route.params.id&&this.$axios.get("packaging/"+this.$route.params.so_id+"/"+this.$route.params.id).then((e=>{this.model=e.data}))},computed:{toolbarButtons(){const e=[];return e.push({label:"Save",id:"save",type:"button",color:"teal",icon:"save"}),e},breadcrumbs(){return[{label:"Dashboard",link:"/"},{label:"Sale Orders",link:"/sale_orders"},{label:this.sale_order.serial_no,link:"/sale_orders/view/"+this.$route.params.so_id},{label:"Packaging",link:"/packaging/"+this.$route.params.so_id},{label:"Create"}]}},methods:{saveFn(){if(this.$refs.name.validate()&this.validateCount()){let e="packaging/"+this.$route.params.so_id;this.$route.params.id&&(this.model._method="PUT",e+="/"+this.$route.params.id),this.$axios.post(e,this.model).then((e=>{"success"===e.data.message&&(this.$q.notify({message:"Saved Successfully",type:"positive"}),this.$router.back())}))}},validateCount(){return this.model.items.length>0||(this.$q.notify({message:"There Should be atleast one item!!",type:"negative"}),!1)},deleteItem(e){this.$q.dialog({title:"Confirm",message:"Do you want to delete this item?",cancel:!0}).onOk((()=>{this.model.items.splice(e,1)}))}}},n=r,c=a("2877"),d=a("9989"),m=a("f09f"),u=a("a370"),p=a("27f9"),h=a("eaac"),b=a("db86"),g=a("9c40"),f=a("24e8"),q=a("d847"),v=a("2c91"),$=a("05c0"),k=a("0016"),x=a("7f67"),_=a("eebe"),y=a.n(_),w=Object(c["a"])(n,s,o,!1,null,null,null);t["default"]=w.exports;y()(w,"components",{QPage:d["a"],QCard:m["a"],QCardSection:u["a"],QInput:p["a"],QTable:h["a"],QTd:b["a"],QBtn:g["a"],QDialog:f["a"],QBar:q["a"],QSpace:v["a"],QTooltip:$["a"],QIcon:k["a"]}),y()(w,"directives",{ClosePopup:x["a"]})}}]);