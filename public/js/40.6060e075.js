(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{b15f:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("page-toolbar",{attrs:{buttons:e.toolbarButtons},on:{create:e.createFn}}),a("breadcrumbs",{attrs:{breadcrumbs:e.breadcrumbs}}),a("simple-data-table",{ref:"simpleDataTable",attrs:{route:"logistic_partners","page-preferences":e.pagePreferences,"edit-permission":"update_logistic_partner","delete-permission":"delete_logistic_partner","page-edit":!0},on:{"edit-fn":e.editFn}}),a("q-dialog",{attrs:{persistent:""},model:{value:e.createDialog,callback:function(t){e.createDialog=t},expression:"createDialog"}},[a("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[a("q-card-section",{staticClass:"row items-center q-pb-none"},[e.edit_mode?a("div",[e._v("Edit logistic partner: "+e._s(e.name))]):a("div",[e._v("Create new logistic partner")]),a("q-space"),a("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(t){return e.closeCreateDialog()}}})],1),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-input",{ref:"name",attrs:{label:"Name",outlined:"",square:"",error:e.nameError,"error-message":e.nameErrorMessage},on:{blur:function(t){e.name=e.capitaliseFn(e.name)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),a("div",{staticClass:"row q-mt-md"},[a("div",{staticClass:"col"},[a("q-input",{ref:"address",attrs:{type:"textarea",label:"Address",outlined:"",square:""},on:{blur:function(t){e.name=e.capitaliseFn(e.name)}},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1)]),e._l(e.contacts,(function(t,s){return a("div",{key:s,staticClass:"row q-col-gutter-md q-mt-md"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{label:"Contact Person",outlined:"",square:"",dense:""},on:{blur:function(t){e.name=e.capitaliseFn(e.name)}},model:{value:e.contacts[s].name,callback:function(t){e.$set(e.contacts[s],"name",t)},expression:"contacts[i].name"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{label:"Phone",outlined:"",square:"",dense:""},on:{blur:function(t){e.name=e.capitaliseFn(e.name)}},model:{value:e.contacts[s].phone,callback:function(t){e.$set(e.contacts[s],"phone",t)},expression:"contacts[i].phone"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{label:"Designation",outlined:"",square:"",dense:""},on:{blur:function(t){e.name=e.capitaliseFn(e.name)}},model:{value:e.contacts[s].designation,callback:function(t){e.$set(e.contacts[s],"designation",t)},expression:"contacts[i].designation"}})],1),a("div",[a("q-btn",{attrs:{color:"grey-7",round:"",icon:"delete",flat:""},on:{click:function(t){return e.contacts.splice(s,1)}}})],1)])})),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-btn",{attrs:{label:"Add Contact Person",color:"primary"},on:{click:function(t){return e.contacts.push({name:"",phone:"",designation:""})}}})],1)])],2),a("q-card-actions",[a("q-btn",{attrs:{label:"Save",color:"green-10",icon:"save"},on:{click:function(t){return e.saveFn()}}}),a("q-btn",{attrs:{label:"cancel",color:"secondary",flat:""},on:{click:function(t){return e.closeCreateDialog()}}})],1)],1)],1)],1)},n=[],i=a("a89c"),r=a("b6c6"),o=a("fde3"),c={name:"PricelistsIndex",components:{PageToolbar:i["a"],Breadcrumbs:r["a"],SimpleDataTable:o["a"]},data(){return{edit_mode:!1,edit_id:null,name:null,nameError:null,nameErrorMessage:"",address:"",contacts:[{name:"",phone:"",designation:""}],createDialog:!1,breadcrumbs:[{label:"Dashboard",link:"/"},{label:"Pricelists",link:"/pricelists"}],pagePreferences:{page_index_visible_columns:"logistic_partners_index_visible_columns",page_index_pagination:"logistic_partners_index_pagination"}}},mounted(){this.$store.commit("setPageTitle","Logistic Partners")},computed:{toolbarButtons(){const e=[];return this.$store.getters.hasPermissionTo("create_logistic_partner")&&e.push({label:"Create",id:"create",type:"button",color:"teal",icon:"add"}),e}},methods:{createFn(){this.name=null,this.nameError=!1,this.nameErrorMessage="",this.address="",this.contacts=[{name:"",phone:"",designation:""}],this.edit_mode=!1,this.createDialog=!0,this.$nextTick((()=>{this.$refs.name.focus()}))},editFn(e){this.edit_id=e.id,this.name=e.name,this.nameError=!1,this.nameErrorMessage="",this.address=e.address,this.contacts=e.contacts,this.edit_mode=!0,this.createDialog=!0,this.$nextTick((()=>{this.$refs.name.focus(),this.$refs.name.select()}))},closeCreateDialog(){this.nameError=!1,this.nameErrorMessage="",this.name=null,this.address="",this.contacts=[{name:"",phone:"",designation:""}],this.edit_id=null,this.edit_mode=!1,this.createDialog=!1},saveFn(){let e="logistic_partners";this.edit_mode&&(e="logistic_partners/"+this.edit_id);const t={name:this.capitaliseFn(this.name),_method:this.edit_mode?"PUT":"POST",address:this.address,contacts:this.contacts};this.$q.loading.show(),this.$axios.post(e,t).then((e=>{"success"===e.data.message&&(this.$q.loading.hide(),this.$q.notify({type:"positive",message:"Data Saved Successfully"}),this.closeCreateDialog(),this.refreshFn())})).catch((e=>{this.$q.loading.hide(),422===e.response.status&&(this.$q.notify({type:"negative",message:e.response.data.message}),this.nameError=!0,this.nameErrorMessage=e.response.data.errors.name[0])}))},refreshFn(){const e=this.$refs.simpleDataTable;e.getDataFromApi()},capitaliseFn(e){if(e){const t=e.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].substring(1);return t.join(" ")}return""}}},l=c,d=a("2877"),m=a("9989"),u=a("24e8"),p=a("f09f"),h=a("a370"),g=a("2c91"),b=a("9c40"),f=a("27f9"),_=a("4b7e"),v=a("eebe"),q=a.n(v),C=Object(d["a"])(l,s,n,!1,null,null,null);t["default"]=C.exports;q()(C,"components",{QPage:m["a"],QDialog:u["a"],QCard:p["a"],QCardSection:h["a"],QSpace:g["a"],QBtn:b["a"],QInput:f["a"],QCardActions:_["a"]})}}]);