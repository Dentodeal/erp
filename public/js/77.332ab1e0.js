(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[77],{"0c64":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("page-toolbar",{attrs:{buttons:t.toolbarButtons}}),a("breadcrumbs",{attrs:{breadcrumbs:t.breadcrumbs}}),a("div",{class:t.$q.screen.gt.sm?"q-px-lg q-mt-md":"q-px-xs q-mt-sm"},[a("q-card",[a("div",{staticClass:"row q-col-gutter-md q-pa-md "},[a("div",{staticClass:"col"},[a("q-markup-table",{attrs:{"wrap-cells":"",separator:"cell"}},[a("tbody",[a("tr",[a("td",[t._v("Name")]),a("td",[t._v(t._s(t.model.name))])]),a("tr",[a("td",[t._v("Customer/Lead")]),t.model.customer?a("td",[a("router-link",{attrs:{to:t.getCustomerLink}},[t._v(t._s(t.model.customer.name))]),t.billingAddress?[a("br"),t._v(t._s(t.billingAddress)+"\n                                  ")]:t._e()],2):a("td")]),a("tr",[a("td",[t._v("Warehouse")]),a("td",[t._v(t._s(t.model.warehouse?t.model.warehouse.name:""))])]),a("tr",[a("td",[t._v("Pricelist")]),a("td",[t._v(t._s(t.model.pricelist?t.model.pricelist.name:""))])]),a("tr",[a("td",[t._v("FOB Point")]),a("td",[t._v(t._s(t.model.fob_point))])]),a("tr",[a("td",[t._v("PO Number")]),a("td",[t._v(t._s(t.model.po_number))])]),a("tr",[a("td",[t._v("Contact Person")]),a("td",[t._v(t._s(t.model.contact_person||(t.model.representative?t.model.representative.name:"")))])]),a("tr",[a("td",[t._v("Contact Phone")]),a("td",[t._v(t._s(t.model.contact_phone))])]),a("tr",[a("td",[t._v("Bank")]),a("td",[t.model.bank?a("q-item",[a("q-item-section",[a("q-item-label",[t._v(t._s(t.model.bank.name))]),a("q-item-label",{attrs:{caption:""}},[t._v("Account Name: "+t._s(t.model.bank.acc_name))]),a("q-item-label",{attrs:{caption:""}},[t._v("Bank: "+t._s(t.model.bank.bank_name))]),a("q-item-label",{attrs:{caption:""}},[t._v("Acc No. "+t._s(t.model.bank.acc_no))]),a("q-item-label",{attrs:{caption:""}},[t._v("IFSC: "+t._s(t.model.bank.ifsc))]),a("q-item-label",{attrs:{caption:""}},[t._v("UPI: "+t._s(t.model.bank.upi))])],1)],1):t._e()],1)])])])],1),a("div",{staticClass:"col"},[a("q-markup-table",{attrs:{"wrap-cells":"",separator:"cell"}},[a("tbody",[a("tr",[a("td",[t._v("Status")]),a("td",[t._v(t._s(t.model.status))])]),a("tr",[a("td",[t._v("Created By")]),a("td",[t._v(t._s(t.model.created_by?t.model.created_by.name:""))])]),a("tr",[a("td",[t._v("Representative")]),a("td",[t._v(t._s(t.model.representative?t.model.representative.name:""))])]),a("tr",[a("td",[t._v("Created At")]),a("td",[t._v(t._s(t.getLocaleString(t.model.created_at)))])]),a("tr",[a("td",[t._v("Valid Until")]),a("td",[t._v(t._s(t.getLocaleString(t.model.valid_until)))])]),a("tr",[a("td",[t._v("Ship Date")]),a("td",[t._v(t._s(t.getLocaleString(t.model.ship_date)))])]),a("tr",[a("td",[t._v("Ship Via")]),a("td",[t._v(t._s(t.model.ship_via))])]),a("tr",[a("td",[t._v("Contact Email")]),a("td",[t._v(t._s(t.model.contact_email))])]),t.model.sale_orders?t._l(t.model.sale_orders,(function(e,s){return a("tr",{key:s},[0===s?a("td",{attrs:{rowspan:t.model.sale_orders.length}},[t._v("Sale Orders")]):t._e(),a("td",{style:0!==s?{borderLeft:"1px solid rgba(0, 0, 0, 0.12)"}:""},[a("router-link",{attrs:{to:"/sale_orders/view/"+e.id}},[t._v(t._s(e.serial_no)+"\n                                      "),a("q-badge",{staticClass:"q-ml-md",attrs:{align:"top",outline:"",color:"primary",label:e.status}})],1)],1)])})):t._e(),a("tr",[a("td",[t._v("Type")]),a("td",[t._v(t._s(t.model.type))])])],2)])],1)]),a("div",{staticClass:"row q-col-gutter-md q-pa-md "},[a("div",{staticClass:"col"},[a("q-markup-table",{attrs:{"wrap-cells":"",separator:"cell"}},[a("tbody",[a("tr",[a("td",[t._v("Rate Includes GST: "+t._s(t.model.rate_includes_gst?"Yes":"No"))]),a("td",[t._v("Include Flood Cess ?: "+t._s("Yes"==t.model.flood_cess_included?"Yes":"No"))])])])])],1)]),a("div",{staticClass:"row q-col-gutter-md q-pa-md "},[a("div",{staticClass:"col"},[a("q-table",{staticClass:"my-sticky-header-table",attrs:{columns:t.columns,title:"Items",data:t.model.items,"row-key":"sl_no","wrap-cells":"",loading:t.table_loading,"rows-per-page-options":[0],filter:t.search},scopedSlots:t._u([{key:"header",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-th",{attrs:{"auto-width":""}}),t._l(e.cols,(function(s){return a("q-th",{key:s.name,attrs:{props:e}},[t._v("\n                        "+t._s(s.label)+"\n                      ")])}))],2)]}},{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{attrs:{"auto-width":""}},[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:e.expand?"arrow_drop_down":"arrow_right"},on:{click:function(t){e.expand=!e.expand}}})],1),a("q-td",{staticClass:"text-right"},[t._v(t._s(e.rowIndex+1))]),a("q-td",[t._v("\n                        "+t._s(e.row.product_id?e.row.product.name:e.row.product_name)+"\n                        "),e.row.product_id?t._e():a("q-badge",{attrs:{align:"top",outline:"",color:"primary",label:"New"}}),e.row.converted_qty==e.row.qty?a("q-badge",{attrs:{align:"top",outline:"",color:"green-7",label:"Converted"}}):t._e(),e.row.converted_qty>0&&e.row.converted_qty!=e.row.qty?a("q-badge",{attrs:{align:"top",outline:"",color:"orange-7",label:"Partially Converted"}}):t._e()],1),a("q-td",{staticClass:"text-right"},[t._v("\n                        "+t._s(e.row.product_id?e.row.qty*e.row.product.weight:0)+"\n                      ")]),a("q-td",{staticClass:"text-right"},[e.row.gst?a("div",[t._v("\n                          "+t._s(e.row.gst)+"%\n                        ")]):t._e()]),a("q-td",{staticClass:"text-right"},[t._v("\n                        "+t._s(e.row.qty)+"\n                      ")]),a("q-td",{staticClass:"text-right"},[t._v("\n                        "+t._s(e.row.rate)+"\n                      ")]),t.model.rate_includes_gst?t._e():a("q-td",{staticClass:"text-right"},[t._v("\n                        "+t._s(e.row.taxable)+"\n                      ")]),t.model.rate_includes_gst?t._e():a("q-td",{staticClass:"text-right"},[t._v("\n                        "+t._s(e.row.tax_amount)+"\n                      ")]),a("q-td",{staticClass:"text-right"},[t._v("\n                        "+t._s(e.row.total)+"\n                      ")])],1),a("q-tr",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"props.expand"}],attrs:{props:e}},[a("q-td",{attrs:{colspan:"100%"}},[a("div",{staticClass:"text-left"},[t._v("Use Mask: "+t._s(e.row.use_mask?"Yes":"No")+", Mask Name: "+t._s(e.row.mask_name))])])],1)]}},{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search",clearable:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"bottom-row",fn:function(){return[a("q-tr",{staticClass:"bg-blue-grey-3"},[a("td",{attrs:{colspan:"2"}}),a("td",{staticClass:"text-right"},[t._v("Total Weight:")]),a("td",{staticClass:"text-right"},[t._v(t._s(parseFloat(t.totalWeight).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2}))+"gm")]),a("td",{staticClass:"text-right"},[t._v("Total Qty:")]),a("td",{staticClass:"text-right"},[t._v(t._s(parseFloat(t.totalQty)))]),t.model.rate_includes_gst?t._e():a("td",{attrs:{colspan:"2"}}),a("td",{staticClass:"text-right"},[t._v("Subtotal")]),a("td",{staticClass:"text-right"},[t._v(t._s(parseFloat(t.model.subtotal).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})))])]),a("q-tr",{staticClass:"bg-blue-grey-1"},[a("q-td",{attrs:{colspan:t.model.rate_includes_gst?6:8}}),a("q-td",{staticClass:"text-right"},[t._v("Discount")]),a("q-td",{staticClass:"text-right"},[t._v("-"+t._s(parseFloat(t.model.discount).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})))])],1),a("q-tr",{staticClass:"bg-blue-grey-1"},[a("q-td",{attrs:{colspan:t.model.rate_includes_gst?6:8}}),a("q-td",{staticClass:"text-right"},[t._v("Freight")]),a("q-td",{staticClass:"text-right"},[t._v(t._s(parseFloat(t.model.freight).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})))])],1),"Export"===t.model.type?a("q-tr",{staticClass:"bg-blue-grey-1"},[a("q-td",{attrs:{colspan:t.model.rate_includes_gst?6:8}}),a("q-td",{staticClass:"text-right"},[t._v("Bank Charges")]),a("q-td",{staticClass:"text-right"},[t._v(t._s(parseFloat(t.model.bank_charges).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})))])],1):t._e(),"Export"===t.model.type?a("q-tr",{staticClass:"bg-blue-grey-1"},[a("q-td",{attrs:{colspan:t.model.rate_includes_gst?6:8}}),a("q-td",{staticClass:"text-right"},[t._v("Previous Balance")]),a("q-td",{staticClass:"text-right"},[t._v(t._s(parseFloat(t.model.prev_balance).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})))])],1):t._e(),a("q-tr",{staticClass:"bg-blue-grey-1"},[a("q-td",{attrs:{colspan:t.model.rate_includes_gst?6:8}}),a("q-td",{staticClass:"text-right"},[t._v("Round")]),a("q-td",{staticClass:"text-right"},[t._v(t._s(parseFloat(t.model.round).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})))])],1),a("q-tr",{staticClass:"bg-blue-grey-3"},[a("q-td",{attrs:{colspan:t.model.rate_includes_gst?6:8}}),a("q-td",{staticClass:"text-right"},[t._v("Total")]),a("q-td",{staticClass:"text-right"},[t._v(t._s(parseFloat(t.model.total).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})))])],1)]},proxy:!0}])})],1)]),t.model.instructions?a("div",{staticClass:"row"},[a("div",{staticClass:"col q-px-md"},[a("div",{staticClass:"text-h6"},[t._v("Instructions")]),a("div",{domProps:{innerHTML:t._s(t.model.instructions)}})])]):t._e(),t.model.terms?a("div",{staticClass:"row"},[a("div",{staticClass:"col q-px-md"},[a("div",{staticClass:"text-h6"},[t._v("Terms")]),a("div",{domProps:{innerHTML:t._s(t.model.terms)}})])]):t._e(),t.model.remarks?a("div",{staticClass:"row"},[a("div",{staticClass:"col q-px-md"},[a("div",{staticClass:"text-h6"},[t._v("Remarks")]),a("div",{domProps:{innerHTML:t._s(t.model.remarks)}})])]):t._e()])],1),a("page-toolbar",{staticClass:"q-mt-md",attrs:{"page-title":"",buttons:t.toolbarButtons}})],1)},l=[],r=(a("e6cf"),a("a79d"),a("a89c")),o=a("b6c6"),i={name:"QuotationsView",components:{PageToolbar:r["a"],Breadcrumbs:o["a"]},data(){return{model:{bank:null,name:null,customer:{name:null},representative:{name:null},created_by:{name:null},created_at:null,status:null,remarks:"",instructions:"",terms:"",valid_until:null,fob_point:null,po_number:null,warehouse:{name:null},pricelist:{name:null},rate_includes_gst:null,flood_cess_included:null,items:[],subtotal:null,discount:null,freight:null,round:null,total:null,search:null,table_loading:!1,ship_date:null,ship_via:null,contact_person:null,contact_phone:null,contact_email:null,sale_orders:[],bank_charges:null,prev_balance:null},billingAddress:null,search:null,table_loading:!1}},mounted(){this.$q.loading.show(),this.$axios.get("quotation_templates/"+this.$route.params.id).then((t=>{this.model=t.data})).finally((()=>{this.loadAddress(),this.$q.loading.hide()}))},methods:{getLocaleString(t){if(t){const e=new Date(t);return e.toLocaleString("en-IN")}return""},loadAddress(){this.model.customer&&"OTC"!==this.model.customer.name&&(this.$q.loading.show(),this.billingAddress=null,this.$axios.get("customer_addresses/"+this.model.customer.id).then((t=>{1===t.data.representatives.length&&(this.model.representative_id=t.data.representatives[0].id),t.data.addresses.forEach((t=>{"billing"===t.tag_name&&(this.billingAddress=this.addressFormat(t))}))})).finally((()=>{this.$q.loading.hide()})))},addressFormat(t){let e="";return e+=t.line_1+", ",t.line_2&&(e+=t.line_2+", "),t.district&&(e+=t.district+", "),e+=t.state+", ",t.pin&&(e+="PIN: "+t.pin+", "),e+=t.country+", ",e+="Ph: ",t.phones.forEach((t=>{e+="("+t.country_code+")"+t.content+", "})),e=e.substr(0,e.length-2),e}},computed:{totalWeight(){return this.$_.sumBy(this.model.items,(t=>parseFloat(t.product?t.product.weight*t.qty:0)))},totalQty(){return this.$_.sumBy(this.model.items,(t=>parseFloat(t.qty)))},toolbarButtons(){const t=[{label:"Edit",id:"edit",type:"a",link:"/quotation_templates/edit/"+this.$route.params.id,color:"teal",icon:"edit"}];return t},columns(){const t=[{name:"sl_no",field:"sl_no",label:"#",sortable:!0},{name:"product_name",field:"product_name",label:"Product",sortable:!0,align:"left"},{name:"weight",field:"weight",label:"Weight",sortable:!0,align:"right"},{name:"gst",field:"gst",label:"GST",sortable:!0},{name:"qty",field:"qty",label:"Qty",sortable:!0},{name:"rate",field:"rate",label:"Rate",sortable:!0}];return this.model.rate_includes_gst||t.push({name:"taxable",field:"taxable",label:"Taxable",sortable:!0},{name:"tax_amount",field:"tax_amount",label:"Tax Amount",sortable:!0}),t.push({name:"total",field:"total",label:"Total",sortable:!0}),t},breadcrumbs(){const t=[{label:"Dashboard",link:"/"},{label:"Quotation Templates",link:"/quotation_templates"},{label:this.model.name}];return t},getCustomerLink(){return this.model.customer?this.model.customer.is_lead?"/leads/view/"+this.model.customer.id:"/customers/view/"+this.model.customer.id:""}}},n=i,d=a("2877"),c=a("9989"),m=a("f09f"),_=a("2bb1"),u=a("66e5"),p=a("4074"),g=a("0170"),b=a("58a81"),v=a("eaac"),h=a("bd08"),q=a("357e"),x=a("db86"),C=a("9c40"),w=a("27f9"),y=a("0016"),f=a("eebe"),k=a.n(f),F=Object(d["a"])(n,s,l,!1,null,null,null);e["default"]=F.exports;k()(F,"components",{QPage:c["a"],QCard:m["a"],QMarkupTable:_["a"],QItem:u["a"],QItemSection:p["a"],QItemLabel:g["a"],QBadge:b["a"],QTable:v["a"],QTr:h["a"],QTh:q["a"],QTd:x["a"],QBtn:C["a"],QInput:w["a"],QIcon:y["a"]})}}]);