(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"0668":function(e,t,s){},"713b":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.authenticated?s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{staticClass:"bg-cyan-6",attrs:{elevated:""}},[s("q-toolbar",[e.authenticated?s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}):e._e(),s("q-toolbar-title",[e._v("\n        "+e._s(e.$store.state.pageTitle)+"\n      ")]),s("div",{staticClass:"text-subtitle2 q-mr-lg"},[e._v("Hello "+e._s(e.$store.getters.user.name))]),s("q-btn",{attrs:{icon:"notifications",dense:"",flat:"",to:"/notifications"}},[e.unread_notifications_count>0?s("q-badge",{attrs:{color:"orange",floating:""}},[e._v(e._s(e.unread_notifications_count))]):e._e()],1),s("q-btn",{attrs:{flat:"",round:"",icon:"account_circle"}}),s("q-btn",{attrs:{flat:"",round:"",icon:"logout"},on:{click:function(t){return e.logout()}}})],1)],1),e.authenticated?s("q-drawer",{attrs:{width:250,"show-if-above":"",bordered:"","content-class":"bg-grey-10",dark:""},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[s("q-list",e._l(e.linksData,(function(t){return s("EssentialLink",e._b({key:t.title},"EssentialLink",t,!1))})),1)],1):e._e(),s("q-page-container",{style:{backgroundImage:"linear-gradient(rgba(255,255,255,.9), rgba(255,255,255,.9)), url(/apexion_logo.svg)",backgroundSize:"80%",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat"}},[s("router-view")],1)],1):e._e()},o=[],n=s("ded3"),r=s.n(n),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.children.length>0?s("q-expansion-item",{attrs:{group:"group",icon:e.icon,label:e.title}},e._l(e.children,(function(t){return s("q-list",{key:t.link},[s("q-item",{staticStyle:{"padding-left":"72px"},attrs:{"active-class":"bg-cyan-9 text-grey-5",clickable:"",tage:"a",to:e.link+t.link}},[s("q-item-section",[s("q-item-label",[e._v(e._s(t.title))])],1)],1)],1)})),1):s("q-item",{attrs:{exact:"",clickable:"",tag:"a",to:e.link}},[e.icon?s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:e.icon}})],1):e._e(),s("q-item-section",[s("q-item-label",[e._v(e._s(e.title))])],1)],1)},l=[],h={name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""},children:{type:Array,default:()=>[]}}},c=h,u=s("2877"),p=s("3b73"),d=s("1c1c"),g=s("66e5"),m=s("4074"),_=s("0170"),$=s("0016"),k=s("eebe"),y=s.n(k),w=Object(u["a"])(c,a,l,!1,null,null,null),f=w.exports;y()(w,"components",{QExpansionItem:p["a"],QList:d["a"],QItem:g["a"],QItemSection:m["a"],QItemLabel:_["a"],QIcon:$["a"]});var v=s("2f62"),b={name:"MainLayout",components:{EssentialLink:f},data(){return{leftDrawerOpen:!1,unread_notifications_count:0}},computed:r()({linksData(){const e=[];if(e.push({title:"Dashboard",icon:"home",link:"/"}),(this.$store.getters.hasRole("Admin")||this.$store.getters.hasRole("Super Admin"))&&e.push({title:"Analytics",icon:"analytics",link:"/analytics"}),this.$store.getters.hasPermissionTo("viewAny_product")||this.$store.getters.hasPermissionTo("viewAny_category")||this.$store.getters.hasPermissionTo("viewAny_taxonomy")||this.$store.getters.hasPermissionTo("viewAny_product_attribute")||this.$store.getters.hasPermissionTo("viewAny_product_attribute_set")||this.$store.getters.hasPermissionTo("viewAny_pricelist")){const t=[];this.$store.getters.hasPermissionTo("viewAny_product")&&t.push({title:"Products",link:"/products"}),this.$store.getters.hasPermissionTo("viewAny_product")&&(t.push({title:"Product Bundles",link:"/product_bundles"}),t.push({title:"Product Types",link:"/product_types"}),t.push({title:"Department",link:"/product_departments"}),t.push({title:"Categories",link:"/product_categories"}),t.push({title:"Sub Categories",link:"/product_sub_categories"}),t.push({title:"Brands",link:"/product_brands"})),this.$store.getters.hasPermissionTo("viewAny_pricelist")&&t.push({title:"Pricelists",link:"/pricelists"}),e.push({title:"Catalog",icon:"archive",link:"",children:t})}if(this.$store.getters.hasPermissionTo("viewAny_customer")){const t=[];this.$store.getters.hasPermissionTo("viewAny_customer")&&t.push({title:"Customers",link:"/customers"}),this.$store.getters.hasPermissionTo("viewAny_lead")&&t.push({title:"Leads",link:"/leads"}),this.$store.getters.hasPermissionTo("viewAny_quotation")&&t.push({title:"Quotations",link:"/quotations"}),this.$store.getters.hasPermissionTo("viewAny_quotation")&&t.push({title:"Quotation Templates",link:"/quotation_templates"}),e.push({title:"CRM",icon:"supervisor_account",link:"",children:t})}if(this.$store.getters.hasPermissionTo("viewAny_lead")){const t=[];this.$store.getters.hasPermissionTo("viewAny_lead")&&t.push({title:"Phones",link:"/phones"}),this.$store.getters.hasPermissionTo("viewAny_lead")&&t.push({title:"Emails",link:"/emails"}),e.push({title:"Marketing",icon:"public",link:"",children:t})}if(this.$store.getters.hasPermissionTo("viewAny_sale_order")){const t=[];this.$store.getters.hasPermissionTo("viewAny_sale_order")&&(t.push({title:"Sale Orders",link:"/sale_orders"}),t.push({title:"Sale Order Revisit",link:"/sale_order_revisits"}),t.push({title:"Sale Returns",link:"/sale_returns"})),e.push({title:"Sales",icon:"point_of_sale",link:"",children:t})}if(this.$store.getters.hasPermissionTo("viewAny_shipment")||this.$store.getters.hasPermissionTo("viewAny_logistic_partner")){const t=[];this.$store.getters.hasPermissionTo("viewAny_sale_order")&&(t.push({title:"Shipments",link:"/shipments"}),t.push({title:"Logistic Partners",link:"/logistic_partners"})),e.push({title:"Logistics",icon:"local_shipping",link:"",children:t})}if(this.$store.getters.hasPermissionTo("viewAny_purchase")){const t=[];this.$store.getters.hasPermissionTo("viewAny_purchase")&&(t.push({title:"Purchases",link:"/purchases"}),t.push({title:"Purchase Returns",link:"/purchase_returns"}),t.push({title:"Suppliers",link:"/suppliers"})),e.push({title:"Purchases",icon:"receipt",link:"",children:t})}if(this.$store.getters.hasPermissionTo("access_inventory")){const t=[];this.$store.getters.hasPermissionTo("viewAny_warehouse")&&(t.push({title:"Warehouses",link:"/warehouses"}),t.push({title:"Stock Entries",link:"/stock_entries"})),this.$store.getters.hasPermissionTo("create_purchase")&&t.push({title:"Goods Receive Notes",link:"/goods_receive_notes"}),e.push({title:"Inventory",icon:"dns",link:"",children:t})}if(this.$store.getters.hasPermissionTo("viewAny_user")||this.$store.getters.hasPermissionTo("viewAny_user_role")){const t=[];this.$store.getters.hasPermissionTo("viewAny_user")&&t.push({title:"Users",link:"/users"}),this.$store.getters.hasPermissionTo("viewAny_user_role")&&t.push({title:"User Roles",link:"/user_roles"}),e.push({title:"Users",icon:"people",link:"",children:t})}return(this.$store.getters.hasPermissionTo("export_product")||this.$store.getters.hasPermissionTo("export_customer")||this.$store.getters.hasPermissionTo("export_sale_order")||this.$store.getters.hasPermissionTo("export_lead")||this.$store.getters.hasPermissionTo("export_quotation")||this.$store.getters.hasPermissionTo("export_phone"))&&e.push({title:"Exports",icon:"get_app",link:"/exports"}),(this.$store.getters.hasRole("Super Admin")||this.$store.getters.hasRole("Admin"))&&e.push({title:"Settings",icon:"settings",link:"/settings"}),e}},Object(v["b"])(["authenticated","appLoading"])),watch:{authenticated(e,t){this.$store.getters.isAuthenticated?this.$router.push({name:"Dashboard"}):this.$router.push({name:"LoginPage"})}},mounted(){this.$fcm.requestPermission().then((()=>(console.log("GRANTED"),this.$fcm.getToken({vapidKey:"BHUs2BA2idWufYV8I1AAgUsFQ8BHnqISsy-aG0TdEshWm4Of8R6oKenyY9Gjo1SK0sbDwNj_ZE-XOjNqX6cHUlA"})))).then((e=>{this.$axios.post("user/fcm_token",{token:e}),this.$fcm.onMessage((e=>{this.$q.notify({message:e.notification.title+": "+e.notification.body,type:"info"})}))})).catch((e=>{console.log("Error Occurred."+e)})),this.$store.dispatch("init"),this.$store.getters.isAuthenticated||this.$router.push({name:"LoginPage"}),window.intercepted.$on("error403",(e=>{this.$q.notify({type:"negative",message:e})})),window.intercepted.$on("error500",(()=>{this.$q.notify({type:"negative",message:"Something went wrong!!"})})),window.intercepted.$on("error404",(()=>{this.$router.push({name:"Error404"})})),window.intercepted.$on("error401",(()=>{this.$store.commit("setAuthenticated",!1)})),this.$store.getters.user},methods:{logout(){this.$q.dialog({title:"Confirm",message:"Do you really want to logout?",cancel:!0,persistent:!0}).onOk((()=>{this.$q.loading.show(),this.$store.dispatch("logout").then((()=>{this.$q.loading.hide()})).catch((e=>{throw this.$q.loading.hide(),new Error(`Problem handling something: ${e}.`)}))})).onCancel((()=>{}))},notifyFn(){this.$q.dialog({title:"Confirm",message:"Would you like to continue?",cancel:!0,persistent:!0}).onOk((()=>{this.$axios.get("notify").then((e=>{this.$q.notify({message:"Done Done"})}))}))}}},P=b,T=(s("83ec"),s("4d5a")),A=s("e359"),q=s("65c6"),x=s("9c40"),S=s("6ac5"),Q=s("58a81"),D=s("9404"),E=s("09e3"),L=s("eaac"),O=Object(u["a"])(P,i,o,!1,null,null,null);t["default"]=O.exports;y()(O,"components",{QLayout:T["a"],QHeader:A["a"],QToolbar:q["a"],QBtn:x["a"],QToolbarTitle:S["a"],QBadge:Q["a"],QDrawer:D["a"],QList:d["a"],QPageContainer:E["a"],QTable:L["a"]})},"83ec":function(e,t,s){"use strict";s("0668")}}]);