(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{"51bd":function(e,t,l){"use strict";l.r(t);var s=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("q-page",{staticClass:"q-px-lg"},[l("breadcrumbs",{attrs:{breadcrumbs:e.breadcrumbs}}),l("div",{staticClass:"row"},[l("div",{staticClass:"col-12 col-md-3"},[l("q-select",{attrs:{dense:"",outlined:"",options:e.getOptions,label:"Entity"},model:{value:e.entity,callback:function(t){e.entity=t},expression:"entity"}})],1)]),e.columns.length>0?l("div",{staticClass:"row q-mt-md"},[l("div",{staticClass:"col"},[l("div",{staticClass:"text-subtitle2"},[e._v("Select Columns to Import")]),l("q-btn",{attrs:{flat:"",color:"grey-10",label:"Select All"},on:{click:function(t){e.selectedColumns=e.$_.map(e.columns,"value")}}}),l("q-btn",{attrs:{flat:"",color:"grey-10",label:"Deselect All"},on:{click:function(t){e.selectedColumns=[]}}})],1)]):e._e(),e.columns.length>0?l("div",{staticClass:"row q-col-gutter-md"},[e._l(e.columns,(function(t,s){return[l("div",{key:s},[l("q-checkbox",{attrs:{val:t.value,label:t.label},model:{value:e.selectedColumns,callback:function(t){e.selectedColumns=t},expression:"selectedColumns"}})],1)]}))],2):e._e(),l("div",{staticClass:"row q-mt-md"},[l("div",{staticClass:"col"},[l("q-btn",{attrs:{unelevated:"",tile:"",color:"primary",label:"Generate",disable:0===e.selectedColumns.length},on:{click:e.exportFn}}),e.download_link?l("q-btn",{staticClass:"q-ml-md",attrs:{unelevated:"",tile:"",color:"green",type:"a",href:e.download_link,target:"_blank",label:"Download"}}):e._e()],1)])],1)},a=[],o=(l("e6cf"),l("a79d"),l("b6c6")),n={name:"ExportsIndex",components:{Breadcrumbs:o["a"]},data(){return{selectedColumns:[],download_link:null,entity:null,breadcrumbs:[{label:"Dashboard",link:"/"},{label:"Exports",link:"",disabled:!0}],pagePreferences:{page_index_autosearch:"customers_index_autosearch"}}},watch:{entity(){this.selectedColumns=this.$_.map(this.columns,"value")}},computed:{getOptions(){const e=[];return this.$store.getters.hasPermissionTo("export_product")&&e.push("Products"),this.$store.getters.hasPermissionTo("export_customer")&&e.push("Customers"),this.$store.getters.hasPermissionTo("export_lead")&&e.push("Leads"),this.$store.getters.hasPermissionTo("export_sale_order")&&e.push("Sale Orders"),this.$store.getters.hasPermissionTo("export_quotation")&&e.push("Quotations"),this.$store.getters.hasPermissionTo("export_phone")&&e.push("Phones"),e},columns(){return"Customers"===this.entity?[{label:"Name",value:"name"},{label:"Type",value:"type"},{label:"Billing Address Line 1",value:"address_line_1"},{label:"Billing Address Line 2",value:"address_line_2"},{label:"Billing Address Country",value:"address_country"},{label:"Billing Address State",value:"address_state"},{label:"Billing Address District",value:"address_district"},{label:"Billing Address Pin Code",value:"address_pin"},{label:"Email(s)",value:"email"},{label:"Phone(s)",value:"phone"},{label:"GST No",value:"gst_number"},{label:"Balance",value:"balance"},{label:"Representative(s)",value:"representative"},{label:"Status",value:"status"},{label:"Tag(s)",value:"tag"},{label:"Non Billable",value:"non_billable_account"}]:[]}},mounted(){this.$store.commit("setPageTitle","Exports")},methods:{exportFn(){let e=null;"Customers"===this.entity&&(e="customers"),e&&(this.$q.loading.show(),this.$axios({url:e+"/export",method:"POST",data:{selected_columns:this.selectedColumns}}).then((e=>{this.download_link=e.data})).finally((()=>{this.$q.loading.hide()})))}}},i=n,r=l("2877"),d=l("9989"),c=l("ddd8"),u=l("9c40"),m=l("8f8e"),b=l("eebe"),h=l.n(b),p=Object(r["a"])(i,s,a,!1,null,null,null);t["default"]=p.exports;h()(p,"components",{QPage:d["a"],QSelect:c["a"],QBtn:u["a"],QCheckbox:m["a"]})}}]);