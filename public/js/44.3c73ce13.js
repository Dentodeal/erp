(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[44],{c22c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("page-toolbar",{attrs:{buttons:e.toolbarButtons}}),a("breadcrumbs",{attrs:{breadcrumbs:e.breadcrumbs}}),a("q-card",[a("q-card-section",[a("q-table",{attrs:{title:"Items",data:e.items,columns:e.columns,dense:e.$q.screen.lt.md,filter:e.search,loading:e.loading,"rows-per-page-options":[25,50,100]},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:""}},[a("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)]},proxy:!0},{key:"top",fn:function(t){return[a("div",{staticClass:"col"},[a("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Search here..",square:"",clearable:""},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("q-space"),a("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}})]}},{key:"body-cell-box",fn:function(t){return[a("q-td",[e._v("\n            "+e._s(e.$_.map(t.row.product.boxes,"name").join())+"\n          ")])]}},{key:"body-cell-created_at",fn:function(t){return[a("q-td",{staticClass:"text-right"},[e._v("\n            "+e._s(e.getLocaleString(t.row.created_at))+"\n          ")])]}},{key:"body-cell-action",fn:function(t){return[a("q-td",{staticClass:"text-right"},[a("q-btn",{attrs:{round:"",flat:"",icon:"download",color:"grey-9"},on:{click:function(a){return e.download(t.rowIndex,t.row.id)}}}),a("q-btn",{attrs:{round:"",flat:"",icon:"edit",to:"/packaging/"+e.$route.params.so_id+"/edit/"+t.row.id}}),a("q-btn",{attrs:{round:"",flat:"",icon:"delete",color:"grey-9"},on:{click:function(a){return e.deleteFn(t.row.id)}}})],1)]}}])})],1)],1)],1)},o=[],r=(a("e6cf"),a("a79d"),a("5319"),a("ddb0"),a("2b3d"),a("a89c")),s=a("b6c6"),i={name:"BoxIndex",components:{PageToolbar:r["a"],Breadcrumbs:s["a"]},data(){return{sale_order:{serial_no:null},items:[],columns:[{name:"name",field:"name",label:"Box Name",sortable:!0,align:"left"},{name:"created_at",field:"created_at",label:"Created At",sortable:!1,align:"right"},{name:"action",field:"action",label:"",sortable:!1,align:"right"}],search:null,loading:!1}},mounted(){this.$store.commit("setPageTitle","Packaging"),this.$axios.get("sale_orders/"+this.$route.params.so_id).then((e=>{this.sale_order=e.data})),this.getDataFromApi()},computed:{toolbarButtons(){const e=[];return e.push({label:"Items List",id:"create",type:"a",link:"/packaging/"+this.$route.params.so_id+"/items",color:"teal",icon:"list"}),e.push({label:"Create",id:"create",type:"a",link:"/packaging/"+this.$route.params.so_id+"/create",color:"teal",icon:"add"}),e},breadcrumbs(){return[{label:"Dashboard",link:"/"},{label:"Sale Orders",link:"/sale_orders"},{label:this.sale_order.serial_no,link:"/sale_orders/view/"+this.$route.params.so_id},{label:"Packaging",link:""}]}},methods:{deleteFn(e){this.$q.dialog({title:"Confirm",message:"Would you like to delete this record?",cancel:!0,persistent:!0}).onOk((()=>{this.$q.loading.show();const t="packaging/"+this.$route.params.so_id+"/"+e;this.$axios.post(t,{_method:"DELETE"}).then((e=>{"success"===e.data.message&&this.$q.notify({type:"info",message:"Record deleted from database"})})).finally((()=>{this.$q.loading.hide(),this.getDataFromApi()}))}))},getDataFromApi(){this.loading=!0,this.$axios.get("packaging/"+this.$route.params.so_id).then((e=>{this.items=e.data})).finally((()=>{this.loading=!1}))},download(e,t){this.$q.loading.show(),this.$axios({url:"packaging/"+this.$route.params.so_id+"/download/"+t,method:"GET",responseType:"blob"}).then((t=>{const a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",this.items[e].name.replace(/\//g,"")+".pdf"),document.body.appendChild(n),n.click()})).finally((()=>{this.$q.loading.hide()}))},getLocaleString(e){if(e){const t=new Date(e);return t.toLocaleString("en-IN")}return null}}},l=i,c=a("2877"),d=a("9989"),u=a("f09f"),p=a("a370"),g=a("eaac"),m=a("74f7"),h=a("cf57"),b=a("27f9"),f=a("0016"),_=a("2c91"),k=a("9c40"),w=a("db86"),q=a("eebe"),y=a.n(q),$=Object(c["a"])(l,n,o,!1,null,null,null);t["default"]=$.exports;y()($,"components",{QPage:d["a"],QCard:u["a"],QCardSection:p["a"],QTable:g["a"],QInnerLoading:m["a"],QSpinnerGears:h["a"],QInput:b["a"],QIcon:f["a"],QSpace:_["a"],QBtn:k["a"],QTd:w["a"]})}}]);