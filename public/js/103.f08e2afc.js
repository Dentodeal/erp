(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[103],{"24b7":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-page",[t("page-toolbar",{attrs:{"page-title":"Warehouses",buttons:e.toolbarButtons},on:{create:e.createFn}}),t("breadcrumbs",{attrs:{breadcrumbs:e.breadcrumbs}}),t("simple-data-table",{ref:"simpleDataTable",attrs:{route:"warehouses","page-preferences":e.pagePreferences,"edit-permission":"update_warehouse","delete-permission":"delete_warehouse","page-edit":!0},on:{"edit-fn":e.editFn}}),t("q-dialog",{attrs:{persistent:""},model:{value:e.createDialog,callback:function(a){e.createDialog=a},expression:"createDialog"}},[t("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[t("q-card-section",{staticClass:"row items-center q-pb-none"},[e.edit_mode?t("div",[e._v("Edit warehouse: "+e._s(e.name))]):t("div",[e._v("Create new warehouse")]),t("q-space"),t("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(a){return e.closeCreateDialog()}}})],1),t("q-card-section",[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("q-input",{ref:"name",attrs:{label:"Name",outlined:"",square:"",error:e.nameError,"error-message":e.nameErrorMessage},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.saveFn()},blur:function(a){e.name=e.capitaliseFn(e.name)}},model:{value:e.name,callback:function(a){e.name=a},expression:"name"}})],1)])]),t("q-card-actions",[t("q-btn",{attrs:{label:"Save",color:"green-10",icon:"save"},on:{click:function(a){return e.saveFn()}}}),t("q-btn",{attrs:{label:"cancel",color:"secondary",flat:""},on:{click:function(a){return e.closeCreateDialog()}}})],1)],1)],1)],1)},r=[],n=t("a89c"),i=t("b6c6"),o=t("fde3"),l={name:"WarehousesIndex",components:{PageToolbar:n["a"],Breadcrumbs:i["a"],SimpleDataTable:o["a"]},mounted(){this.$store.commit("setPageTitle","Warehouses")},data(){return{edit_mode:!1,edit_id:null,name:null,nameError:null,nameErrorMessage:"",createDialog:!1,breadcrumbs:[{label:"Dashboard",link:"/"},{label:"Warehouses",link:"/warehouses"}],pagePreferences:{page_index_visible_columns:"warehouses_index_visible_columns",page_index_pagination:"warehouses_index_pagination"}}},computed:{toolbarButtons(){const e=[];return this.$store.getters.hasPermissionTo("create_warehouse")&&e.push({label:"Create",id:"create",type:"button",color:"teal",icon:"add"}),e}},methods:{createFn(){this.name=null,this.nameError=!1,this.nameErrorMessage="",this.edit_mode=!1,this.createDialog=!0,this.$nextTick((()=>{this.$refs.name.focus()}))},editFn(e){this.edit_id=e.id,this.name=e.name,this.nameError=!1,this.nameErrorMessage="",this.edit_mode=!0,this.createDialog=!0,this.$nextTick((()=>{this.$refs.name.focus(),this.$refs.name.select()}))},closeCreateDialog(){this.nameError=!1,this.nameErrorMessage="",this.name=null,this.edit_id=null,this.edit_mode=!1,this.createDialog=!1},saveFn(){let e="warehouses";this.edit_mode&&(e="warehouses/"+this.edit_id);const a={name:this.capitaliseFn(this.name),_method:this.edit_mode?"PUT":"POST"};this.$q.loading.show(),this.$axios.post(e,a).then((e=>{"success"===e.data.message&&(this.$q.loading.hide(),this.$q.notify({type:"positive",message:"Data Saved Successfully"}),this.closeCreateDialog(),this.refreshFn())})).catch((e=>{this.$q.loading.hide(),422===e.response.status&&(this.$q.notify({type:"negative",message:e.response.data.message}),this.nameError=!0,this.nameErrorMessage=e.response.data.errors.name[0])}))},refreshFn(){const e=this.$refs.simpleDataTable;e.getDataFromApi()},capitaliseFn(e){if(e){const a=e.split(" ");for(let e=0;e<a.length;e++)a[e]=a[e].charAt(0).toUpperCase()+a[e].substring(1);return a.join(" ")}return""}}},c=l,d=t("2877"),u=t("9989"),h=t("24e8"),m=t("f09f"),p=t("a370"),g=t("2c91"),b=t("9c40"),f=t("27f9"),_=t("4b7e"),w=t("eebe"),v=t.n(w),q=Object(d["a"])(c,s,r,!1,null,null,null);a["default"]=q.exports;v()(q,"components",{QPage:u["a"],QDialog:h["a"],QCard:m["a"],QCardSection:p["a"],QSpace:g["a"],QBtn:b["a"],QInput:f["a"],QCardActions:_["a"]})}}]);