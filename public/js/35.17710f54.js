(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{"2c02":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("page-toolbar",{attrs:{buttons:t.toolbarButtons},on:{createpurchase:t.createPurchase,activate:t.activateFn,revert:t.revert}}),a("breadcrumbs",{attrs:{breadcrumbs:t.breadcrumbs}}),a("div",{class:t.$q.screen.gt.sm?"q-px-lg q-mt-md":"q-px-xs q-mt-sm"},[a("div",{staticClass:"row q-col-gutter-md q-pa-md "},[a("div",{staticClass:"col"},[a("q-markup-table",{attrs:{"wrap-cells":"",separator:"cell"}},[a("tbody",[a("tr",[a("td",[t._v("Serial No")]),a("td",[t._v(t._s(t.serial_no))])]),a("tr",[a("td",[t._v("Supplier")]),a("td",[a("router-link",{attrs:{to:"/suppliers/view/"+t.supplier.id}},[t._v(t._s(t.supplier.name))])],1)]),a("tr",[a("td",[t._v("Warehouse")]),a("td",[t._v(t._s(t.warehouse.name))])]),t.purchase?a("tr",[a("td",[t._v("Purchase Entry")]),a("td",[a("router-link",{attrs:{to:"/purchases/view/"+t.purchase.id}},[t._v(t._s(t.purchase.bill_number))])],1)]):t._e()])])],1),a("div",{staticClass:"col"},[a("q-markup-table",{attrs:{"wrap-cells":"",separator:"cell"}},[a("tbody",[a("tr",[a("td",[t._v("Created By")]),a("td",[t._v(t._s(t.created_by.name))])]),a("tr",[a("td",[t._v("Status")]),a("td",[t._v(t._s(t.status))])]),a("tr",[a("td",[t._v("Delivery Date")]),a("td",[t._v(t._s(t.delivery_date))])])])])],1)]),a("div",{staticClass:"row q-col-gutter-md q-pa-md "},[a("div",{staticClass:"col"},[a("q-table",{staticClass:"my-sticky-header-table",attrs:{columns:t.columns,title:"Items",data:t.items,"row-key":"index","wrap-cells":"",loading:t.table_loading,"rows-per-page-options":[0],filter:t.search},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{staticClass:"text-right"},[t._v(t._s(e.rowIndex+1))]),a("q-td",[a("router-link",{attrs:{to:"/products/view/"+e.row.product.id}},[t._v(" "+t._s(e.row.product.name))]),a("q-btn",{attrs:{icon:"content_copy",flat:"",round:""},on:{click:function(a){return t.$store.dispatch("copyToClipboard",e.row.product.name)}}})],1),a("q-td",{staticClass:"text-right"},[t._v("\n                          "+t._s(e.row.expiry_date)+"\n                        ")]),a("q-td",{staticClass:"text-right"},[t._v("\n                            "+t._s(e.row.qty)+"\n                        ")])],1)]}},{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0}])})],1)]),a("div",{staticClass:"row q-mt-xs"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-h6"},[t._v("Remarks")]),a("div",{domProps:{innerHTML:t._s(t.remarks)}})])])]),a("page-toolbar",{staticClass:"q-mt-md",attrs:{"page-title":"",buttons:t.toolbarButtons},on:{activate:t.activateFn,createpurchase:t.createPurchase,revert:t.revert}})],1)},r=[],o=(a("e6cf"),a("a79d"),a("ddb0"),a("a89c")),i=a("b6c6"),l={name:"PurchasesView",components:{PageToolbar:o["a"],Breadcrumbs:i["a"]},data(){return{serial_no:null,supplier:{name:null},created_by:{name:null},warehouse:{name:null},items:[],delivery_date:null,status:null,table_loading:!1,search:null,remarks:"",purchase:null}},computed:{columns(){const t=[{name:"sl_no",field:"sl_no",label:"#",sortable:!0},{name:"name",field:"name",label:"Product",sortable:!0,align:"left"},{name:"expiry_date",field:"expiry_date",label:"Expiry Date",sortable:!0,align:"right"},{name:"qty",field:"qty",label:"Qty",sortable:!0}];return t},toolbarButtons(){const t=[];return this.$store.getters.hasPermissionTo("create_purchase")&&("Active"!==this.status||this.purchase&&"Draft"!==this.purchase.status||t.push({label:"Revert",id:"revert",type:"button",color:"black",icon:"undo"}),"Draft"===this.status||"Draft - Reverted"===this.status?(t.push({label:"Activate",id:"activate",type:"button",color:"green-10",icon:"check"}),t.push({label:"Edit",id:"edit",type:"a",link:"/goods_receive_notes/edit/"+this.$route.params.id,color:"teal",icon:"edit"})):this.purchase||t.push({label:"Enter Purchase",id:"createpurchase",type:"button",color:"blue-10",icon:"forward"})),t},breadcrumbs(){const t=[{label:"Dashboard",link:"/"},{label:"Good Receive Notes",link:"/goods_receive_notes"},{label:this.serial_no}];return t}},mounted(){this.$store.getters.hasPermissionTo("view_purchase")?(this.$q.loading.show(),Promise.all([this.getDataFromApi()]).finally((()=>{this.$q.loading.hide()}))):this.$router.push({name:"Error403"})},methods:{getDataFromApi(){this.$q.loading.show(),this.$axios.get("goods_receive_notes/"+this.$route.params.id).then((t=>{this.serial_no=t.data.serial_no,this.status=t.data.status,this.supplier=t.data.supplier,this.delivery_date=t.data.delivery_date,this.created_by=t.data.created_by,this.warehouse=t.data.warehouse,this.remarks=t.data.remarks,this.items=t.data.items,this.purchase=t.data.purchase})).then((()=>{this.$store.commit("setPageTitle","Goods Receive Note: "+this.serial_no),this.$q.loading.hide()}))},generatePurchase(){this.$q.dialog({message:"Do you want to continue",cancel:!0}).onOk((()=>{this.$router.push("/purchases/create?grn_id="+this.$route.params.id),this.$q.notify({color:"blue-10",message:"Note: This purchase order is not saved yet."})}))},createPurchase(){this.$router.push("/purchases/create?grn_id="+this.$route.params.id),this.$q.notify({message:"Note!. This purchase entry is not saved yet.",color:"blue-10"})},activateFn(){this.$q.dialog({message:"Do you want to continue",cancel:!0}).onOk((()=>{this.$axios.get("goods_receive_notes/activate/"+this.$route.params.id).then((t=>{"success"===t.data.message&&(this.$q.notify({type:"positive",message:"Data Updated Successfully"}),this.$router.back())}))}))},revert(){this.$q.dialog({message:"Do you want to continue",cancel:!0}).onOk((()=>{this.$axios.get("goods_receive_notes/revert/"+this.$route.params.id).then((t=>{"success"===t.data.message&&(this.$q.notify({type:"positive",message:"Data Updated Successfully"}),this.$router.back())}))}))}}},n=l,c=a("2877"),d=a("9989"),u=a("2bb1"),h=a("eaac"),p=a("bd08"),m=a("db86"),b=a("9c40"),_=a("27f9"),v=a("0016"),g=a("eebe"),y=a.n(g),q=Object(c["a"])(n,s,r,!1,null,null,null);e["default"]=q.exports;y()(q,"components",{QPage:d["a"],QMarkupTable:u["a"],QTable:h["a"],QTr:p["a"],QTd:m["a"],QBtn:b["a"],QInput:_["a"],QIcon:v["a"]})}}]);